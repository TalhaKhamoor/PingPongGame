<!DOCTYPE html>
<html>
  <head>
    <title>Ping Pong Game</title>
    <style>
      body,
      html {
        width: 100%;
        height: 100%;
        margin: 0;
        overflow: hidden;
        display: block;
        background-color: black;
      }
    </style>
  </head>
  <body>
    <canvas
      id="canvas"
      width="800"
      height="400"
      style="
        background-color: black;
        border: 12px dashed white;
        padding-left: 0;
        padding-right: 0;
        margin-left: auto;
        margin-right: auto;
        display: block;
        width: 98%;
      "
    ></canvas>
    <script type="text/javascript" src="js/app.js"></script>
    <script type="text/javascript">
      //Sample functions, remove these functions and design ping-pong game with onInit and onUpdate.

      app.onInit = function () {
        this.canvas = document.getElementById("canvas");
        this.context = this.canvas.getContext("2d");

        this.nodes.push({
          id: "player-one",
          x: canvas.width + canvas.width * 0.01 - canvas.width,
          y: (canvas.height - canvas.height * 0.2) / 2,
          width: canvas.width * 0.01,
          height: canvas.height * 0.2,
          color: "white",
        });

        this.nodes.push({
          id: "player-two",
          x: canvas.width - canvas.width * 0.02,
          y: (canvas.height - canvas.height * 0.2) / 2,
          width: canvas.width * 0.01,
          height: canvas.height * 0.2,
          color: "white",
        });

        this.nodes.push({
          id: "ball",
          x: (canvas.width - this.getNode("player-one").width * 1) / 2,
          y: (canvas.height - this.getNode("player-one").width * 1) / 2,
          width: this.getNode("player-one").width * 1,
          height: this.getNode("player-one").width * 1,
          color: "white",
          direction: 0,
        });

        this.nodes.push({
          id: "line",
          x: (canvas.width - this.getNode("player-one").width * 1) / 2,
          y: 0,
          width: 7,
          height: canvas.height,
          color: "white",
        });
      };

      var speedOfPaddle1 = 0;
      var speedOfPaddle2 = 0;

      app.onUpdate = function (time) {
        this.canvas = document.getElementById("canvas");
        var playerOne = app.getNode("player-one");
        var playerTwo = app.getNode("player-two");

        playerOne.y += speedOfPaddle1;
        playerTwo.y += speedOfPaddle2;

        document.addEventListener("keydown", (e) => {
          if (e.keyCode == 87) {
            speedOfPaddle1 = -2;
          } else if (
            e.keyCode == 83 &&
            playerOne.y < canvas.height - playerOne.height
          ) {
            speedOfPaddle1 = +2;
          } else if (e.keyCode == 38) {
            speedOfPaddle2 = -2;
          } else if (e.keyCode == 40) {
            speedOfPaddle2 = +2;
          }
        });

        document.addEventListener("keyup", (e) => {
          if (e.keyCode == 87) {
            speedOfPaddle1 = 0;
          } else if (e.keyCode == 83) {
            speedOfPaddle1 = 0;
          } else if (e.keyCode == 38) {
            speedOfPaddle2 = 0;
          } else if (e.keyCode == 40) {
            speedOfPaddle2 = 0;
          }
        });

        if (playerOne.y <= 0) {
          playerOne.y = 0;
        }
        if (playerTwo.y <= 0) {
          playerTwo.y = 0;
        }
        if (playerOne.y >= canvas.height - playerOne.height) {
          playerOne.y = canvas.height - playerOne.height;
        }
        if (playerTwo.y >= canvas.height - playerTwo.height) {
          playerTwo.y = canvas.height - playerTwo.height;
        }

        if (Math.cos(this.timestamp / 100) > 0) {
          this.getNode("ball").direction = -2;
        } else {
          this.getNode("ball").direction = 2;
        }

        this.getNode("ball").x += this.getNode("ball").direction;
      };
    </script>
  </body>
</html>
